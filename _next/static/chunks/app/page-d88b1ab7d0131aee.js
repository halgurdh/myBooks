(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1391:(e,t,a)=>{Promise.resolve().then(a.bind(a,8847))},8847:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5155),o=a(2115);function l(e){let{books:t,loading:a,page:o,totalPages:l,setPage:n}=e;return a?(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading recommendations..."}):0===t.length?(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No recommendations found."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(e=>{var t;return(0,s.jsxs)("li",{className:"flex flex-col bg-white border rounded-lg shadow-sm p-4",children:[(0,s.jsx)("img",{src:e.cover||"https://books.google.com/googlebooks/images/no_cover_thumb.gif",alt:e.title,className:"w-full h-48 object-cover rounded-md mb-4 bg-gray-100",loading:"lazy"}),(0,s.jsx)("h2",{className:"text-lg font-medium mb-1",children:e.title}),(0,s.jsxs)("p",{className:"text-sm mb-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Author(s): "}),(null==(t=e.authors)?void 0:t.join(", "))||"Unknown"]}),(0,s.jsxs)("p",{className:"text-sm mb-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Published: "}),e.publishedYear||"N/A"]}),(0,s.jsxs)("p",{className:"text-sm mb-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Rating: "}),null!=e.rating?(0,s.jsxs)("span",{className:"text-yellow-600 font-bold",children:[e.rating.toFixed(2)," / 5"]}):(0,s.jsx)("span",{className:"text-gray-400",children:"No rating"})]}),(0,s.jsx)("a",{href:"https://books.google.com/books?id=".concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"mt-auto text-blue-600 hover:underline text-sm",children:"View on Google Books"})]},e.id)})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-8",children:[(0,s.jsx)("button",{onClick:()=>n(Math.max(1,o-1)),disabled:1===o,className:"px-4 py-2 rounded-lg border ".concat(1===o?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm",children:["Page ",o," of ",l]}),(0,s.jsx)("button",{onClick:()=>n(o+1),disabled:o===l||t.length<16,className:"px-4 py-2 rounded-lg border ".concat(o===l||t.length<16?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Next"})]})]})}let n=["","Science Fiction","Fantasy","Mystery","Romance","Horror","Biography","History","Children","Young Adult","Thriller","Adventure","Poetry","Drama","Comics","Art","Travel"],r=async e=>{let t=await fetch("https://api.datamuse.com/words?rel_syn=".concat(encodeURIComponent(e)));return(await t.json()).map(e=>e.word)},i=async(e,t)=>{let a=[],s=new Set;for(let o of e){let e=encodeURIComponent(o);t&&(e+="+subject:".concat(encodeURIComponent(t)));let l="https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&maxResults=40"),n=await fetch(l),r=await n.json();if(r.items)for(let e of r.items.map(e=>{var t,a;return{id:e.id,title:e.volumeInfo.title,authors:e.volumeInfo.authors,publishedYear:e.volumeInfo.publishedDate?parseInt(e.volumeInfo.publishedDate.substring(0,4)):void 0,cover:null==(t=e.volumeInfo.imageLinks)?void 0:t.thumbnail,rating:null!=(a=e.volumeInfo.averageRating)?a:null,categories:e.volumeInfo.categories,description:e.volumeInfo.description}}))s.has(e.id)||(a.push(e),s.add(e.id))}return a};function c(){let[e,t]=(0,o.useState)("adventure"),[a,c]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[m,g]=(0,o.useState)(""),[h,x]=(0,o.useState)("adventure"),[p,b]=(0,o.useState)({yearFrom:"",yearTo:"",genre:""}),[f,v]=(0,o.useState)([]),[y,j]=(0,o.useState)([]),[w,N]=(0,o.useState)(!1),[k,S]=(0,o.useState)(1),[C,I]=(0,o.useState)([]);(0,o.useEffect)(()=>{(async()=>{N(!0);let e=await r(h),t=Array.from(new Set([h,...e])).slice(0,5);j(t);let a=await i(t,p.genre),s=p.yearFrom?parseInt(p.yearFrom,10):1990,o=p.yearTo?parseInt(p.yearTo,10):new Date().getFullYear(),l=a.filter(e=>e.publishedYear&&e.publishedYear>=s&&e.publishedYear<=o);l.sort((e,t)=>null==e.rating&&null==t.rating?0:null==e.rating?1:null==t.rating?-1:t.rating-e.rating),v(l),I(l),N(!1)})()},[h,p,k]);let _=Math.ceil(C.length/16),R=C.slice((k-1)*16,16*k);return(0,s.jsxs)("main",{className:"max-w-7xl mx-auto p-4 font-sans",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-center mb-6",children:"Book Recommendations (Google Books, Synonyms & Ratings)"}),(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),S(1),x(e),b({yearFrom:a,yearTo:d,genre:m})},className:"flex flex-wrap justify-center mb-8 gap-2",autoComplete:"off",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter a topic or keyword...",className:"w-full max-w-xs px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:border-blue-400"}),(0,s.jsx)("input",{type:"number",value:a,onChange:e=>c(e.target.value),placeholder:"Year from",className:"w-28 px-4 py-2 border rounded-lg shadow-sm",min:0}),(0,s.jsx)("input",{type:"number",value:d,onChange:e=>u(e.target.value),placeholder:"Year to",className:"w-28 px-4 py-2 border rounded-lg shadow-sm",min:0}),(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"w-40 px-4 py-2 border rounded-lg shadow-sm",children:[(0,s.jsx)("option",{value:"",children:"All Genres"}),n.filter(e=>e).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition",children:"Search"})]}),y.length>1&&(0,s.jsxs)("div",{className:"text-center mb-4 text-sm text-gray-600",children:["Searching for: ",(0,s.jsx)("span",{className:"font-semibold",children:y.join(", ")})]}),(0,s.jsx)(l,{books:R,loading:w,page:k,totalPages:_,setPage:S})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(1391)),_N_E=e.O()}]);