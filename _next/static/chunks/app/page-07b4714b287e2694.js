(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1391:(e,t,a)=>{Promise.resolve().then(a.bind(a,3792))},3792:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),n=a(2115);let r=async e=>{let t=await fetch("https://api.datamuse.com/words?rel_syn=".concat(encodeURIComponent(e)));return(await t.json()).map(e=>e.word)},l=async(e,t)=>{let a=e.map(encodeURIComponent).join("+OR+"),s=await fetch("https://openlibrary.org/search.json?q=".concat(a,"&limit=").concat(16,"&page=").concat(t)),n=await s.json();return{books:n.docs.filter(e=>e.cover_i&&e.key).map(e=>({...e,work_key:e.key.replace(/^\/works\//,"")})),numFound:n.numFound}},o=async e=>{try{var t;let a=await fetch("https://openlibrary.org/works/".concat(e,"/ratings.json"));if(!a.ok)return null;let s=await a.json();return"number"==typeof(null==(t=s.summary)?void 0:t.average)?s.summary.average:null}catch(e){return null}};function i(){let[e,t]=(0,n.useState)("adventure"),[a,i]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(1),[g,b]=(0,n.useState)(0),[p,y]=(0,n.useState)("adventure");(0,n.useEffect)(()=>{(async()=>{u(!0);let e=await r(p),t=Array.from(new Set([p,...e])).slice(0,5);d(t);let{books:a,numFound:s}=await l(t,h),n=await Promise.all(a.map(async e=>{if(!e.work_key)return{...e,rating:null};let t=await o(e.work_key);return{...e,rating:t}}));n.sort((e,t)=>null==e.rating&&null==t.rating?0:null==e.rating?1:null==t.rating?-1:t.rating-e.rating),i(n),b(s),u(!1)})()},[p,h]);let f=async t=>{t.preventDefault(),x(1),y(e)},j=Math.ceil(g/16);return(0,s.jsxs)("main",{className:"max-w-7xl mx-auto p-4 font-sans",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-center mb-6",children:"Book Recommendations (with Synonyms & Ratings)"}),(0,s.jsxs)("form",{onSubmit:f,className:"flex justify-center mb-8 gap-2",autoComplete:"off",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter a topic or keyword...",className:"w-full max-w-xs px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:border-blue-400"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition",children:"Search"})]}),c.length>1&&(0,s.jsxs)("div",{className:"text-center mb-4 text-sm text-gray-600",children:["Searching for: ",(0,s.jsx)("span",{className:"font-semibold",children:c.join(", ")})]}),m?(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Loading recommendations..."}):0===a.length?(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No recommendations found."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(e=>{var t;return(0,s.jsxs)("li",{className:"flex flex-col bg-white border rounded-lg shadow-sm p-4",children:[(0,s.jsx)("img",{src:"https://covers.openlibrary.org/b/id/".concat(e.cover_i,"-M.jpg"),alt:e.title,className:"w-full h-48 object-cover rounded-md mb-4"}),(0,s.jsx)("h2",{className:"text-lg font-medium mb-1",children:e.title}),(0,s.jsxs)("p",{className:"text-sm mb-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Author(s): "}),(null==(t=e.author_name)?void 0:t.join(", "))||"Unknown"]}),(0,s.jsxs)("p",{className:"text-sm mb-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"First Published: "}),e.first_publish_year||"N/A"]}),(0,s.jsxs)("p",{className:"text-sm mb-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Rating: "}),null!=e.rating?(0,s.jsxs)("span",{className:"text-yellow-600 font-bold",children:[e.rating.toFixed(2)," / 5"]}):(0,s.jsx)("span",{className:"text-gray-400",children:"No rating"})]}),(0,s.jsx)("a",{href:"https://openlibrary.org".concat(e.key),target:"_blank",rel:"noopener noreferrer",className:"mt-auto text-blue-600 hover:underline text-sm",children:"View on Open Library"})]},e.key)})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-8",children:[(0,s.jsx)("button",{onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===h,className:"px-4 py-2 rounded-lg border ".concat(1===h?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm",children:["Page ",h," of ",j||1]}),(0,s.jsx)("button",{onClick:()=>x(e=>e+1),disabled:h===j||a.length<16,className:"px-4 py-2 rounded-lg border ".concat(h===j||a.length<16?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Next"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(1391)),_N_E=e.O()}]);